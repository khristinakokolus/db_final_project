rabbit.facade.vml=!0,rabbit.vml={getStyleForClass:function(t){for(var e=0;e<document.styleSheets.length;e++)if(-1==document.styleSheets(e).href.indexOf("yui"))for(var l=0;l<document.styleSheets(e).rules.length;l++)if(-1!=document.styleSheets(e).rules[l].selectorText.indexOf("."+t)){var i=document.styleSheets(e).rules[l].style.cssText;cssItems=i.split(";");for(var r={},s=0;s<cssItems.length;s++)cssItem=cssItems[s].split(":"),r[cssItem[0].toLowerCase().replace(" ","")]=cssItem[1].replace(" ","");return r}},setStyle:function(t,e,l){var i=l.createElement("v:fill");"none"==e.fill?i.setAttribute("on","false"):null!=e.fill&&"url(#"==e.fill.substr(0,5)?this.setGradient(t,i,e.fill.substr(5,fill.length-6)):null!=e.fill&&i.setAttribute("color",e.fill),null!=e.opacity&&i.setAttribute("opacity",e.opacity);var r=t.ownerDocument.createElement("v:stroke");"none"==e.stroke?r.setAttribute("on","false"):r.setAttribute("color",e.stroke),strokewidth=e["stroke-width"],strokewidth&&(0==isNaN(parseInt(strokewidth.charAt(strokewidth.length-1),10))&&(strokewidth=Math.round(strokewidth).toFixed(1)+"px"),r.setAttribute("weight",strokewidth)),null!=e.opacity&&r.setAttribute("opacity",e.opacity),null!=e.display&&t.setAttribute("display",e.display);for(var s=!1,n=!1,a=0;a<t.childNodes.length;a++)"fill"==t.childNodes[a].tagName&&(t.replaceChild(i,t.childNodes[a]),s=!0),"stroke"==t.childNodes[a].tagName&&(t.replaceChild(r,t.childNodes[a]),n=!0),this.setStyle(t.childNodes[a],e,l);0==s&&t.appendChild(i),0==n&&t.appendChild(r)},setFill:function(t,e,l,i){var r=t.ownerDocument.createElement("v:fill"),s=l.getAttribute("fill");null==s&&(s=l.style.getAttribute("fill")),"none"==s?r.setAttribute("on","false"):null!=s&&"url(#"==s.substr(0,5)?setGradient(t,r,s.substr(5,s.length-6)):null!=s?r.setAttribute("color",s):"none"==i.fill?r.setAttribute("on","false"):r.setAttribute("color",i.fill);var n=l.getAttribute("fill-opacity");null==n&&(n=l.style.getAttribute("fill-opacity")),null==n&&(n=l.style.opacity),null==n&&(n=i.opacity),null!=n&&""!=n?r.setAttribute("opacity",n):r.setAttribute("opacity","1"),e.appendChild(r)},getFill:function(t,e){var l=e,i=t.getAttribute("fill");null==i&&(i=t.style.getAttribute("fill")),null!=i&&(l.fill=i);var r=t.getAttribute("fill-opacity");return null==r&&(r=t.style.getAttribute("fill-opacity")),null!=r&&(l.opacity=r),l},setStroke:function(t,e,l,i){var r=t.ownerDocument.createElement("v:stroke"),s=l.getAttribute("stroke");null==s&&(s=l.style.getAttribute("stroke")),null==s&&(s=i.stroke),"none"==s?r.setAttribute("on","false"):r.setAttribute("color",s);var n=l.getAttribute("stroke-width");null==n&&(n=l.style.getAttribute("stroke-width")),null==n&&(n=i["stroke-width"]),null!=n&&0==isNaN(parseInt(n.charAt(n.length-1),10))&&(n=Math.round(n).toFixed(1)+"px"),r.setAttribute("weight",n);var a=l.getAttribute("stroke-opacity");null==a&&(a=l.style.getAttribute("stroke-opacity")),null==a&&(a=i.opacity),null!=a&&""!=a?r.setAttribute("opacity",a):r.setAttribute("opacity","1");var o=l.getAttribute("stroke-linejoin");null==o&&(o=l.style.getAttribute("stroke-linejoin")),null==o&&(o=i.join),r.setAttribute("joinstyle",o);var u=l.getAttribute("marker-start");null==u&&(u=l.style.getAttribute("marker-start")),null!=u&&""!=u&&(r.setAttribute("startarrow","open"),r.setAttribute("startarrowlength","long"));var b=l.getAttribute("marker-end");null==b&&(b=l.style.getAttribute("marker-end")),null!=b&&""!=b&&(r.setAttribute("endarrow","open"),r.setAttribute("endarrowlength","long")),e.appendChild(r)},getStroke:function(t,e){var l=e,i=t.getAttribute("stroke");null==i&&(i=t.style.getAttribute("stroke")),null!=i&&(l.color=i);var r=t.getAttribute("stroke-width");null==r&&(r=t.style.getAttribute("stroke-width")),null==r&&(l.width=r);var s=t.getAttribute("stroke-opacity");null==s&&(s=t.style.getAttribute("stroke-opacity")),null!=s&&(l.opacity=s);var n=t.getAttribute("stroke-linejoin");return null==n&&(n=t.style.getAttribute("stroke-linejoin")),null!=n&&(l.join=n),l},setGradient:function(t,e,l){var i=t.ownerDocument.getElementById(l);if(i){"linearGradient"==i.tagName?e.setAttribute("type","gradient"):e.setAttribute("type","gradientradial");var r=i.getAttribute("x1");r=null!=r?parseFloat(r):0;var s=i.getAttribute("y1");s=null!=s?parseFloat(s):0;var n=i.getAttribute("x2");n=null!=n?parseFloat(n):1;var a=i.getAttribute("y2");a=null!=a?parseFloat(a):0;var o=Math.round(57.29*Math.atan((a-s)/(n-r)))+180;e.setAttribute("angle",o);for(var u=i.getElementsByTagName("stop"),b=0;b<u.length;b++){var p=u.item(b),g=p.getAttribute("offset");null==g&&(g=p.style.getAttribute("offset"));var d=p.getAttribute("stop-color");null==d&&(d=p.style.getAttribute("stop-color")),null==d&&(d="black");var h=p.getAttribute("stop-opacity");null==h&&(h=p.style.getAttribute("stop-opacity")),null==h&&(h="1"),0==parseFloat(g)&&(e.setAttribute("color",d),e.setAttribute("opacity",h)),1!=parseFloat(g)&&100!=parseFloat(g)||(e.setAttribute("color2",d),e.setAttribute("opacity2",h))}}},convert:function(t){if("svg"==t.tagName){var e=t.ownerDocument.createElement("div");e.style.position=t.style.position,e.style.top=t.style.top,e.style.left=t.style.left,e.style.width=parseInt(t.style.width.substring(0,t.style.width.length-2))+1+"px",e.style.height=parseInt(t.style.height.substring(0,t.style.height.length-2))+1+"px",e.style.overflow="hidden",""!=t.style.display&&(e.style.display=t.style.getAttribute("display"));rabbit.vml.convertChildren(e,t,{fill:"none",opacity:"1"},{fill:"none",opacity:"1","stroke-width":"1px",join:"miter"});var l=t.getAttribute("id");null!=l&&""!=l&&e.setAttribute("id",l),t.parentNode.replaceChild(e,t)}},convertChildren:function(t,e,l,i){for(var r=0;r<e.children.length;r++){var s=e.children[r],n=s.tagName.toLowerCase();if("rect"==n){var a=e.ownerDocument.createElement("v:rect");""!=s.getAttribute("id")&&(a.id=s.id),a.style.position="absolute",a.style.left=s.getAttribute("x"),a.style.top=s.getAttribute("y"),a.style.width=s.getAttribute("width"),a.style.height=s.getAttribute("height"),null!=s.style.opacity?rabbit.vml.setFill(e,a,s,{color:"none",opacity:s.style.opacity}):rabbit.vml.setFill(e,a,s,l),rabbit.vml.setStroke(e,a,s,i),t.appendChild(a)}else if("ellipse"==n){a=e.ownerDocument.createElement("v:oval");""!=s.getAttribute("id")&&(a.id=s.id),a.style.position="absolute",a.style.left=s.getAttribute("cx")-s.getAttribute("rx"),a.style.top=s.getAttribute("cy")-s.getAttribute("ry"),a.style.width=2*s.getAttribute("rx"),a.style.height=2*s.getAttribute("ry"),rabbit.vml.setFill(e,a,s,l),rabbit.vml.setStroke(e,a,s,i),t.appendChild(a)}else if("circle"==n){a=e.ownerDocument.createElement("v:oval");""!=s.getAttribute("id")&&(a.id=s.id),a.style.position="absolute",a.style.left=s.getAttribute("cx")-s.getAttribute("r"),a.style.top=s.getAttribute("cy")-s.getAttribute("r"),a.style.width=2*s.getAttribute("r"),a.style.height=2*s.getAttribute("r"),rabbit.vml.setFill(e,a,s,l),rabbit.vml.setStroke(e,a,s,i),t.appendChild(a)}else if("line"==n){a=e.ownerDocument.createElement("v:line");""!=s.getAttribute("id")&&(a.id=s.id),a.style.cssText=s.style.cssText,a.style.position="absolute";var o=s.getAttribute("x1"),u=s.getAttribute("y1"),b=s.getAttribute("x2"),p=s.getAttribute("y2"),g=o<b?0:o-b,d=u<p?0:u-p,h=o<b?b-o:0,c=u<p?p-u:0;g=o==b?o:g,d=u==p?u:d,h=o==b?o:h,c=u==p?u:c,a.setAttribute("from",g+","+d),a.setAttribute("to",h+","+c),rabbit.vml.setStroke(e,a,s,i),t.appendChild(a)}else if("polyline"==n){a=e.ownerDocument.createElement("v:polyline");""!=s.getAttribute("id")&&(a.id=s.id),a.style.position="absolute",a.style.left="0",a.style.top="0",a.style.width="21600",a.style.height="21600",a.setAttribute("coordsize","21600,21600"),a.setAttribute("points",s.getAttribute("points")),rabbit.vml.setFill(e,a,s,l),rabbit.vml.setStroke(e,a,s,i),t.appendChild(a)}else if("path"==n){a=e.ownerDocument.createElement("v:shape");""!=s.getAttribute("id")&&(a.id=s.id),a.style.position="absolute";var y=null!=s.getAttribute("width")?parseInt(s.getAttribute("width")):1e3,A=null!=s.getAttribute("height")?parseInt(s.getAttribute("height")):1e3;a.setAttribute("coordsize",y+","+A);var m=0,f=0;if(""!=(G=s.getAttribute("transform"))){expr=/[ ]?((?:translate|scale)\([^)]*\))/g;for(var v=expr.exec(G),x=new Array;null!=v;)x.push(v[1]),G=G.substr(v[1].length),expr=/[ ]?((?:translate|scale)\([^)]*\))/g,v=expr.exec(G);for(var w=x.length-1;w>=0;w--){if("scale("==x[w].substr(0,6))U=(U=x[w].substring(6,x[w].length-1)).split(","),y*=Y=parseFloat(U[0]),m*=Y,A*=H=U.length>1?parseFloat(U[1]):Y,f*=H;else if("translate("==x[w].substr(0,10)){V=(V=x[w].substring(10,x[w].length-1)).split(","),m+=Z=parseFloat(V[0]),f+=V.length>1?parseFloat(V[1]):Z}}}a.style.left=m+"px",a.style.top=f+"px",a.style.width=y+"px",a.style.height=A+"px",""!=s.style.display&&(a.style.display=s.style.getAttribute("display"));var k=s.getAttribute("d");if((k=(k=(k=(k=(k=k.replace(/z/g,"x")).replace(/Z/g,"x")).replace(/Q/g,"l")).replace(/q/g,"l")).replace(/S/g,"l")).search(/\./)>-1){pathitems=k.split(/[ ,]/);for(w=0;w<pathitems.length;w++)0==isNaN(parseFloat(pathitems[w]))&&(pathitems[w]=Math.round(pathitems[w]));k=pathitems.join(" ")}if(a.setAttribute("path",k),s.getAttribute("className")&&""!=s.getAttribute("className")){var C=rabbit.vml.getStyleForClass(s.getAttribute("className"));for(var N in l)null==C[N]&&(C[N]=l[N]);rabbit.vml.setFill(e,a,s,C),rabbit.vml.setStroke(e,a,s,C)}else rabbit.vml.setFill(e,a,s,l),rabbit.vml.setStroke(e,a,s,i);t.appendChild(a)}else if("text"==n){var F=s.style.cssText;if(1==s.childNodes.length&&3==s.childNodes[0].nodeType){var E=e.ownerDocument.createElement("div");""!=s.getAttribute("id")&&(E.id=s.id),E.style.cssText=F,E.style.setAttribute("text-decoration:none;"),-1!=(I=E.style.getAttribute("fontSize")).indexOf("em")?I=12*I.split("em")[0]:-1!=I.indexOf("px")&&(I=I.split("px")[0]);var S=e.ownerDocument.createTextNode(s.firstChild.nodeValue);E.appendChild(S),E.style.position="absolute",E.style.left=s.getAttribute("x")+"px",E.style.top=s.getAttribute("y")-I+2+"px",t.appendChild(E)}else{var D=0;for(w=0;w<s.childNodes.length;w++)if(1==s.childNodes[w].nodeType){var I;E=e.ownerDocument.createElement("div");if(""!=s.getAttribute("id")&&(E.id=s.id),E.style.cssText=F,-1!=(I=E.style.getAttribute("fontSize")).indexOf("em")?I=12*I.split("em")[0]:-1!=I.indexOf("px")&&(I=I.split("px")[0]),null!=s.childNodes[w].firstChild){S=e.ownerDocument.createTextNode(s.childNodes[w].firstChild.nodeValue);E.appendChild(S),D++,E.style.position="absolute",E.style.left="0",E.style.top=(D-1)*I,t.appendChild(E)}}}}else if("g"==n){a=e.ownerDocument.createElement("v:group");""!=s.getAttribute("id")&&(a.id=s.id),a.style.position="absolute";y=null!=s.getAttribute("width")?parseInt(s.getAttribute("width")):1e3,A=null!=s.getAttribute("height")?parseInt(s.getAttribute("height")):1e3;a.setAttribute("coordsize",y+","+A);m=0,f=0;if(""!=(G=s.getAttribute("transform"))){expr=/[ ]?((?:translate|scale)\([^)]*\))/g;for(v=expr.exec(G),x=new Array;null!=v;)x.push(v[1]),G=G.substr(v[1].length),expr=/[ ]?((?:translate|scale)\([^)]*\))/g,v=expr.exec(G);for(w=x.length-1;w>=0;w--){if("scale("==x[w].substr(0,6))U=(U=x[w].substring(6,x[w].length-1)).split(","),y*=Y=parseFloat(U[0]),m*=Y,A*=H=U.length>1?parseFloat(U[1]):Y,f*=H;else if("translate("==x[w].substr(0,10)){V=(V=x[w].substring(10,x[w].length-1)).split(","),m+=Z=parseFloat(V[0]),f+=V.length>1?parseFloat(V[1]):Z}}}a.style.left=m+"px",a.style.top=f+"px",a.style.width=y+"px",a.style.height=A+"px";var T=s.getAttribute("name");null!=T&&""!=T&&a.setAttribute("name",T);var O=s.getAttribute("visibility");null!=O&&""!=O&&a.style.setAttribute("display","hidden"==O?"none":O),null!=(z=s.getAttribute("onclick"))&&""!=z&&a.setAttribute("onclick",z),null!=(M=s.getAttribute("onmouseover"))&&""!=M&&a.setAttribute("onmouseover",M),null!=(_=s.getAttribute("onmouseout"))&&""!=_&&a.setAttribute("onmouseout",_);var P=s.style.getAttribute("cursor");null!=P&&""!=P&&a.style.setAttribute("cursor",P);var j=rabbit.vml.getFill(s,l),B=rabbit.vml.getStroke(s,i);rabbit.vml.convertChildren(a,s,j,B),t.appendChild(a)}else if("a"==n){a=e.ownerDocument.createElement("a");var z,M,_,L=s.getAttribute("xlink:href");null!=L&&""!=L&&a.setAttribute("href",L),a.style.cursor="pointer",null!=(z=s.getAttribute("onclick"))&&""!=z&&a.setAttribute("onclick",z),null!=(M=s.getAttribute("onmouseover"))&&""!=M&&a.setAttribute("onmouseover",M),null!=(_=s.getAttribute("onmouseout"))&&""!=_&&a.setAttribute("onmouseout",_);j=rabbit.vml.getFill(s,l),B=rabbit.vml.getStroke(s,i);rabbit.vml.convertChildren(a,s,j,B),t.appendChild(a)}else if("image"==n){var G=s.getAttribute("transform");m=0,f=0,y=s.getAttribute("width"),A=s.getAttribute("height");if(""!=G){expr=/[ ]?((?:translate|scale)\([^)]*\))/g;for(v=expr.exec(G),x=new Array;null!=v;)x.push(v[1]),G=G.substr(v[1].length),expr=/[ ]?((?:translate|scale)\([^)]*\))/g,v=expr.exec(G);for(w=x.length-1;w>=0;w--){var U,Y,H;if("scale("==x[w].substr(0,6))U=(U=x[w].substring(6,x[w].length-1)).split(","),y*=Y=parseFloat(U[0]),m*=Y,A*=H=U.length>1?parseFloat(U[1]):Y,f*=H;else if("translate("==x[w].substr(0,10)){var V,Z;V=(V=x[w].substring(10,x[w].length-1)).split(","),m+=Z=parseFloat(V[0]),f+=V.length>1?parseFloat(V[1]):Z}}}a=e.ownerDocument.createElement("v:image");y<0&&(a.style.flip="x",m-=y*=-1),A<0&&("x"==a.style.flip?a.style.flip="x y":a.style.flip="y",f-=A*=-1),a.style.position="absolute",a.style.left=m+"px",a.style.top=f+"px",a.style.width=y+"px",a.style.height=A+"px",a.style.overflow="hidden";var q=s.getAttribute("xlink:href");null==q&&(q=""),q.replace("_(d)+Z",""),a.setAttribute("src",q),a.setAttribute("name",s.getAttribute("name")),""==q&&(a.style.display="none"),t.appendChild(a)}else if("svg"==n){a=e.ownerDocument.createElement("v:group");""!=s.getAttribute("id")&&(a.id=s.id),a.style.position="absolute",a.style.left="0px",a.style.top="0px";y=null!=s.getAttribute("width")&&""!=s.getAttribute("width")?s.getAttribute("width"):1e3,A=null!=s.getAttribute("height")&&""!=s.getAttribute("height")?s.getAttribute("height"):1e3;a.style.width=y+"px",a.style.height=A+"px",a.setAttribute("coordsize",y+","+A);j=rabbit.vml.getFill(s,l),B=rabbit.vml.getStroke(s,i);rabbit.vml.convertChildren(a,s,j,B),t.appendChild(a)}}}},rabbit.result.manager.setClass=function(t,e){var l={};""!=e&&(l=rabbit.vml.getStyleForClass(e));for(var i=t.style.cssText.split(";"),r=0;r<i.length;r++)cssItem=i[r].split(":"),l[cssItem[0].toLowerCase().replace(" ","")]=cssItem[1].replace(" ","");rabbit.vml.setStyle(t,l,t.ownerDocument)},rabbit.result.manager.changeTab=function(t,e){t&&t.data.id,null===this.oldPageId&&_facade.getCurrentPageId();for(var l=selectorUtil.getElementsByName("target"+this.oldPage),i=0;i<l.length;i++)2==l[i].childNodes.length?(l[i].firstChild.style.display="block",l[i].firstChild.nextSibling.style.display="none"):l[i].getElementsByTagName("fill")[0].setAttribute("color","white");for(l=selectorUtil.getElementsByName("target"+t.data.id),i=0;i<l.length;i++)2==l[i].childNodes.length?(l[i].firstChild.style.display="none",l[i].firstChild.nextSibling.style.display="block"):l[i].getElementsByTagName("fill")[0].setAttribute("color","#D3D3D3");this.oldPageId=_facade.getCurrentPageId()},YAHOO.widget.Menu.prototype._onBeforeShow=function(t,e){var l,i,r,s=this.cfg.getProperty("container");if(this.lazyLoad&&0===this.getItemGroups().length){if(this.srcElement&&this._initSubTree(),this.itemData)if(this.parent&&this.parent.parent&&this.parent.parent.srcElement&&"SELECT"==this.parent.parent.srcElement.tagName.toUpperCase())for(l=this.itemData.length,i=0;i<l;i++)this.itemData[i].tagName&&this.addItem(new this.ITEM_TYPE(this.itemData[i]));else this.addItems(this.itemData);(r=this.srcElement)?"SELECT"==r.tagName.toUpperCase()?Dom.inDocument(r)?this.render(r.parentNode):this.render(s):this.render():!this.parent instanceof YAHOO.widget.MenuBarItem?this.render(this.parent.element):this.render(document.getElementById("menucontainer"))}var n,a=this.parent;a||"dynamic"!=this.cfg.getProperty("position")||this.cfg.refireEvent("xy"),a&&(n=a.parent.cfg.getProperty("submenualignment"),this._initSubTree(),this.cfg.setProperty("context",[a.element,n[0],n[1]]),this.align())};
//# sourceMappingURL=Vml.js.map